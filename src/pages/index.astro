---
import Layout from "../layouts/Layout.astro";
import HeroSection from "../components/HeroSection.astro";
import AccordionSection from "../components/AccordionSection.astro";
import SambutanSection from "../components/SambutanSection.astro";
import FaqSection from "../components/FaqSection.astro";
import FaqContent from "../components/FaqContent.astro";
import Footer from "../components/Footer.astro";
import "../styles/glass-droplet.css";
---

<Layout title="Beranda | Iniedu">
  <HeroSection />
  <AccordionSection />
  <SambutanSection />
  <FaqSection>
    <FaqContent />
    <div
      class="faq-image-container"
      data-aos="fade-left"
      data-aos-duration="800"
    >
      <img src="/images/bg.webp" alt="Ilustrasi FAQ" class="faq-image" />
    </div>
  </FaqSection>
  <Footer />
  <script>
    // Efek 3D tilt interaktif pada semua card dengan class group (fix TypeScript lint)
    const cards = document.querySelectorAll(".group");
    cards.forEach((cardEl) => {
      const card = cardEl as HTMLElement;
      card.style.perspective = "800px";
      card.addEventListener("mousemove", (e) => {
        const event = e as MouseEvent;
        const rect = card.getBoundingClientRect();
        const x = event.clientX - rect.left;
        const y = event.clientY - rect.top;
        const centerX = rect.width / 2;
        const centerY = rect.height / 2;
        const rotateX = ((y - centerY) / centerY) * 10;
        const rotateY = ((x - centerX) / centerX) * 10;
        card.style.transform = `scale(1.08) translateY(-12px) rotateX(${-rotateX}deg) rotateY(${rotateY}deg)`;
        card.style.transition = "transform 0.1s";
        card.style.boxShadow = "0 0 48px 8px #38bdf8, 0 0 24px 4px #6366f1";
      });
      card.addEventListener("mouseleave", () => {
        card.style.transform = "";
        card.style.transition = "transform 0.6s";
        card.style.boxShadow = "";
      });
    });
    // Efek 3D tilt interaktif pada badge hashtag
    const badges = document.querySelectorAll(
      ".flex.flex-wrap.gap-4 span.group"
    );
    badges.forEach((badgeEl) => {
      const badge = badgeEl as HTMLElement;
      badge.style.perspective = "600px";
      badge.addEventListener("mousemove", (e) => {
        const event = e as MouseEvent;
        const rect = badge.getBoundingClientRect();
        const x = event.clientX - rect.left;
        const y = event.clientY - rect.top;
        const centerX = rect.width / 2;
        const centerY = rect.height / 2;
        const rotateX = ((y - centerY) / centerY) * 10;
        const rotateY = ((x - centerX) / centerX) * 10;
        badge.style.transform = `scale(1.08) translateY(-4px) rotateX(${-rotateX}deg) rotateY(${rotateY}deg)`;
        badge.style.transition = "transform 0.1s";
        badge.style.boxShadow = "0 0 24px 4px #38bdf8, 0 0 12px 2px #f472b6";
      });
      badge.addEventListener("mouseleave", () => {
        badge.style.transform = "";
        badge.style.transition = "transform 0.6s";
        badge.style.boxShadow = "";
      });
    });
  </script>
  <style>
    .faq-image-container {
      max-width: 700px; /* Perbesar lebar gambar */
      flex-shrink: 0; /* Mencegah gambar menyusut */
    }
    .faq-image {
      width: 100%;
      height: auto;
      border-radius: 1.5rem; /* rounded-3xl */
      object-fit: cover;
    }

    /* Responsive: sembunyikan gambar versi desktop di mobile */
    @media (max-width: 1024px) {
      .faq-image-container {
        display: none; /* Sembunyikan gambar desktop di mobile */
      }
      .faq-image {
        max-width: 100%;
        height: auto;
      }
      .faq-section-bg {
        justify-content: center;
      }
    }
  </style>
  <style>
    @media (max-width: 640px) {
      .ml-64.justify-center {
        justify-content: flex-start !important;
        margin-left: 0 !important;
        padding-left: 18px !important;
      }
      .pl-52.items-start {
        padding-left: 0 !important;
      }
      /* Tambahkan jarak bawah pada badge terakhir di mobile */
      .flex-wrap.gap-4.mt-4 > span:last-child {
        margin-bottom: 16px !important;
      }
    }
    /* Animasi Bubble Glassmorphism & Dot Floating (INLINE) */
    .animate-bubble-float-slow {
      animation: bubbleFloatSlow 18s ease-in-out infinite alternate;
    }
    .animate-bubble-float-medium {
      animation: bubbleFloatMedium 13s ease-in-out infinite alternate;
    }
    .animate-bubble-float-fast {
      animation: bubbleFloatFast 9s ease-in-out infinite alternate;
    }
    @keyframes bubbleFloatSlow {
      0% {
        transform: translateY(0) scale(1);
      }
      100% {
        transform: translateY(-32px) scale(1.04);
      }
    }
    @keyframes bubbleFloatMedium {
      0% {
        transform: translateY(0) scale(1);
      }
      100% {
        transform: translateY(-24px) scale(1.03);
      }
    }
    @keyframes bubbleFloatFast {
      0% {
        transform: translateY(0) scale(1);
      }
      100% {
        transform: translateY(-16px) scale(1.01);
      }
    }
    .particle-dot {
      position: absolute;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: linear-gradient(135deg, #bae6fd 60%, #38bdf8 100%);
      opacity: 0.38;
      filter: blur(1.5px);
    }
    .animate-dot-move {
      animation: dotMove 12s linear infinite alternate;
    }
    .animate-dot-move2 {
      animation: dotMove2 15s linear infinite alternate;
    }
    .animate-dot-move3 {
      animation: dotMove3 18s linear infinite alternate;
    }
    .animate-dot-move4 {
      animation: dotMove4 21s linear infinite alternate;
    }
    @keyframes dotMove {
      0% {
        transform: translateY(0) scale(1);
      }
      100% {
        transform: translateY(-40px) scale(1.12);
      }
    }
    @keyframes dotMove2 {
      0% {
        transform: translateY(0) scale(1);
      }
      100% {
        transform: translateY(28px) scale(0.93);
      }
    }
    @keyframes dotMove3 {
      0% {
        transform: translateX(0) scale(1);
      }
      100% {
        transform: translateX(-36px) scale(1.09);
      }
    }
    @keyframes dotMove4 {
      0% {
        transform: translateX(0) scale(1);
      }
      100% {
        transform: translateX(30px) scale(0.97);
      }
    }
  </style>

  <style>
    .sosmed-btn {
      transition:
        transform 0.16s,
        box-shadow 0.16s,
        filter 0.16s;
      filter: brightness(1);
      cursor: pointer;
    }
    .sosmed-btn:hover {
      -webkit-backdrop-filter: blur(44px) saturate(2.6);
      backdrop-filter: blur(44px) saturate(2.6);
      transform: translateY(-3px) scale(1.07);
      filter: brightness(1.08) drop-shadow(0 4px 16px #0002);
      box-shadow: 0 4px 18px #0002;
      z-index: 2;
    }
    @media (max-width: 640px) {
      footer .flex.flex-1.min-w-\[340px\].gap-8.justify-end.flex-wrap {
        align-items: flex-start !important;
        justify-content: flex-start !important;
        padding-left: 18px !important;
      }
      footer .footer-btn {
        text-align: left !important;
        justify-content: flex-start !important;
        margin-left: 0 !important;
        padding-left: 0 !important;
      }
      footer .flex.flex-col.gap-2.mt-2.min-w-\[160px\] {
        align-items: flex-start !important;
      }
      footer .flex.justify-end.items-start {
        justify-content: flex-start !important;
        padding-left: 0 !important;
      }
      footer img.w-\[210px\] {
        margin-left: 0 !important;
      }
      footer .w-full.mt-8.flex.justify-center.items-center {
        justify-content: flex-start !important;
        padding-left: 18px !important;
      }
    }
  </style>
  <script is:inline>
    // Memastikan AOS di-refresh ketika user scroll ke bawah (khusus untuk kasus footer tidak muncul)
    let lastScroll = 0;
    let footerShown = false;
    window.addEventListener("scroll", function () {
      const footer = document.querySelector("footer");
      if (!footer) return;
      const rect = footer.getBoundingClientRect();
      const windowHeight =
        window.innerHeight || document.documentElement.clientHeight;
      // Jika footer mulai terlihat di viewport dan belum pernah di-refresh
      if (rect.top < windowHeight && !footerShown) {
        if (window.AOS && typeof window.AOS.refresh === "function") {
          window.AOS.refresh();
        }
        footerShown = true;
      }
      // Reset jika user scroll ke atas lagi (opsional)
      if (rect.top > windowHeight) {
        footerShown = false;
      }
    });
  </script>
</Layout>
