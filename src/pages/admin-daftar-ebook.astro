---
import Layout from '../layouts/Layout.astro';
import AdminSidebar from '../components/AdminSidebar.astro';
import '../styles/global.css';
---
<Layout title="Daftar E-Book Perpustakaan">
  <div class="min-h-screen bg-gray-50 flex">
    <div class="sticky top-0 h-screen hidden md:block">
      <AdminSidebar active="daftar-ebook" />
    </div>
    <main class="flex-1 overflow-x-auto">
      <div class="max-w-4xl mx-auto px-4 py-8">
        <h1 class="text-2xl font-bold text-blue-700 mb-6">Daftar E-Book Perpustakaan</h1>
        <div class="grid md:grid-cols-3 gap-6" id="ebook-list">
          <!-- Daftar e-book akan dirender di sini -->
        </div>
      </div>
    </main>
  </div>
  <script type="module">
    // Dummy data awal (bisa diganti dengan fetch ke backend/Supabase)
    let ebooks = [
      {
        judul: "Contoh Buku Digital",
        penulis: "Admin Iniedu",
        tahun: 2024,
        penerbit: "Iniedu Press",
        deskripsi: "Contoh buku digital untuk demo.",
        cover: "https://images.unsplash.com/photo-1512820790803-83ca734da794?auto=format&fit=crop&w=400&q=80",
        link: "https://example.com/contoh-buku.pdf"
      }
    ];
    const ebookList = document.getElementById('ebook-list');
    function renderEbooks() {
      ebookList.innerHTML = '';
      if (ebooks.length === 0) {
        ebookList.innerHTML = '<div class="col-span-3 text-center text-gray-400">Belum ada buku.</div>';
        return;
      }
      ebooks.forEach((buku, idx) => {
        const div = document.createElement('div');
        div.className = 'bg-white rounded-xl shadow p-4 flex flex-col items-center';
        div.innerHTML = `
          <img src="${buku.cover || '/default-cover.png'}" alt="Cover Buku" class="w-32 h-44 object-cover rounded mb-2" />
          <div class="font-bold mt-2 text-center">${buku.judul}</div>
          <div class="text-sm text-gray-500 mb-1">${buku.penulis}${buku.tahun ? ', ' + buku.tahun : ''}</div>
          ${buku.penerbit ? `<div class='text-xs text-gray-400 mb-1'>Penerbit: ${buku.penerbit}</div>` : ''}
          ${buku.deskripsi ? `<div class='text-xs text-gray-500 mb-2 italic'>${buku.deskripsi}</div>` : ''}
          <a href="${buku.link}" target="_blank" class="px-4 py-2 bg-blue-500 text-white rounded-full font-semibold mt-auto">Baca Sekarang</a>
        `;
        ebookList.appendChild(div);
      });
    }
    renderEbooks();
  </script>
</Layout>
